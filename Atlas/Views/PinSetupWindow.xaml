<Window x:Class="Atlas.Views.PinSetupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Create Your PIN" 
        Height="450" 
        Width="550"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource BackgroundBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0">
                <TextBlock Text="Step 2: Create Your PIN 🔐" 
                           FontSize="24" 
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextBrush}"
                           Margin="0,0,0,10"/>
                <TextBlock Text="Choose a numeric PIN to protect your vault" 
                           FontSize="14" 
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,30"/>
            </StackPanel>

            <!-- Content -->
            <StackPanel Grid.Row="1">
                <!-- PIN Input -->
                <TextBlock Text="Enter PIN (4-8 digits):" 
                           FontSize="13" 
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,8"/>
                <PasswordBox x:Name="PinBox" 
                             Style="{StaticResource ModernPasswordBox}"
                             Height="45"
                             FontSize="18"
                             PasswordChanged="PinBox_PasswordChanged"
                             MaxLength="8"/>

                <!-- Confirm PIN Input -->
                <TextBlock Text="Confirm PIN:" 
                           FontSize="13" 
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,20,0,8"/>
                <PasswordBox x:Name="ConfirmPinBox" 
                             Style="{StaticResource ModernPasswordBox}"
                             Height="45"
                             FontSize="18"
                             PasswordChanged="PinBox_PasswordChanged"
                             MaxLength="8"/>

                <!-- Error Message -->
                <TextBlock x:Name="ErrorText"
                           Text=""
                           Foreground="#EF4444"
                           FontSize="12"
                           Margin="0,10,0,0"
                           Visibility="Collapsed"/>

                <!-- Info -->
                <Border Background="{StaticResource SurfaceBrush}"
                        BorderBrush="{StaticResource PrimaryBrush}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="15"
                        Margin="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="💡 Remember:" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource PrimaryBrush}"
                                   Margin="0,0,0,5"/>
                        <TextBlock Text="If you forget your PIN, you'll need to reset the app completely. Choose something memorable!" 
                                   TextWrapping="Wrap"
                                   FontSize="12"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Navigation -->
            <Button Grid.Row="2" 
                    x:Name="CreateButton"
                    Content="Create and Enter Atlas 🎉" 
                    Style="{StaticResource ModernButton}"
                    Width="250"
                    Height="45"
                    FontSize="14"
                    HorizontalAlignment="Right"
                    Margin="0,30,0,0"
                    IsEnabled="False"
                    Click="CreateButton_Click"
                    PreviewMouseDown="CreateButton_PreviewMouseDown"/>
        </Grid>
    </ScrollViewer>
</Window>